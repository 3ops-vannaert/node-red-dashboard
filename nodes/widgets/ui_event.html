<script type="text/javascript">
    (function () {
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }
        RED.nodes.registerType('ui-event', {
            category: RED._('@flowforge/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowforge/node-red-dashboard/ui-base:ui-base.colors.dark'),
            defaults: {
                ui: { type: 'ui-base', value: '', required: true },
                name: { value: '' },
                topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
                topicType: { value: 'msg' }
            },
            inputs: 0,
            outputs: 1,
            icon: 'font-awesome/fa-i-cursor',
            paletteLabel: 'event',
            oneditprepare: function () {
                // topic
                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })
            },
            label: function () {
                return this.name || 'ui-event'
            },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-event">
    <div class="form-row">
        <label for="node-input-ui"><i class="fa fa-bookmark"></i> UI</label>
        <input type="text" id="node-input-ui">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
</script>
